# 为什么使用NoSQL
## 关系型数据库的价值
* 获取持久化数据，保证`I / O`效率。
* 处理并发的能力，关系型数据库通过事务来控制对数据的访问，以便处理并发问题。
* 共享数据集成，多个应用共享数据库。
* 近乎标准的模型，`SQL`语言成为标准，各大厂商的语法类似。

## 阻抗失谐
`阻抗失谐`是指：关系模型和内存中的数据结构之间存在差异。关系模型把数据组织成`表`和`行`，更准确地说，应该是`关系`和`元组`。在关系模型中，`元组`是由`键值对`构成的集合，而`关系`则是`元组`构成的集合。

而对于关系型数据库的`关系元组`中的值必须很简单才行。它们不能包含`嵌套记录`或`列表`等任何结构。而内存中的数据结构则无此限制，它可以使用的数据组织形式化比`关系`更丰富。这样一来，如果在内存中使用了较为丰富的数据结构，那么要把它保存到磁盘之前，必须先将其转换成`关系`形式，于是就发生了`阻抗失谐`：需要在两种不同的表示形式之间转译。

`阻抗失谐`是造成应用程序开发者不满的主要原因。

## 应用程序数据库和集成数据库
### 集成数据库
`SQL`充当了应用程序的之间的一种集成机制。数据库在这种情况下成了`集成数据库(integration database)`：通常由不同团队所开发的多个应用程序，将其数据存储在一个公用的数据库中。这就提高了数据通信的效率，因为所有应用程序都在操作内容一致的持久数据。

数据库通常不能由应用程序更新其数据，为了保持数据库的完整性，我们需要将这一责任交由数据库本身负责。

### 应用程序数据库
另一种办法是，将数据库视为`应用程序数据库(application database)`，其内容只能由一个应用程序的代码库直接访问，而这份代码库是由一个团队来维护的。只有开发应用程序的那个团队才知道其结构。这样一来，模式的维护与更新就更容易了。由于应用程序开发团队同时管理数据库和应用程序代码，因此可以把维护数据库完整性的工作放在应用程序代码中。

交互工作转由应用程序接口来做，这样一来，就会出现更好的交互协议，而且还可以修改应用程序的接口。应用程序之间可以通过`HTTP协议`来通信。在各种广泛使用的通信机制中，`Web服务`算是一种新的形式，它挑战“以`SQL`来共享数据库”的使用方式。因为其可以使用嵌套记录及列表等更丰富的数据结构，而对于使用`SQL`交互的关系型数据库，那么必须使用关系型的数据结构。

### 蜂拥而来的集群
由于`Web`流量的大量增加，我们必须有更多的计算资源，才能应对数据和流量的增加。处理此类增长有两种方案：纵向拓展及横向拓展。如果要纵向拓展，那么就需要功能更强大的计算机，要购买更多的处理器、磁盘存储空间和内存。但是机器的功能越强，其成本也越高，更何况其扩展尺度也有限。另一种方案是：采用多个小型计算机组成的集群。集群中的小型机可以使用性价比比较高的硬件，这样就能降低拓展所需的成本。

虽然关系型数据库也可以把数据划分为几个集合，并将其分别放在各自独立的服务器上运行，于是就能有效地对数据库分片。但这么做虽然能将负载分散到多个服务器之中，但是应用程序必须控制所有分片，它要知道数据库中的每份小数据都存放在哪个服务器里才行。而且，`查询`、`参照完整性`、`事务`、`一致性控制`等操作也都无法以跨分片的方式执行了。越来越多的企业也开始采集并处理更多数据，以探究这些数据的用途，在此过程中，它们也同样会遇到关系型数据库与集群之间不协调的问题。

### NoSQL登场
大多数`NoSQL`数据库的研发动机，都是为了要在集群环境中运行，而且最初那次聚会所讨论的那些数据库，也是为了这一目的而开发的。

然而，并非所有`NoSQL`数据库都是为了运行在集群上而设计的。图数据库就属于这种风格的`NoSQL`数据库。

操作`NoSQL`数据库不需要使用**模式**，这样不用事先修改结构定义，即可自由添加字段了。

因此，选用`NoSQL`的两个主要原因：

* 一是待处理数据量很大，或对数据访问的效率要求很高，从而必须将数据放在集群上。
* 二是想采用一种更为方便的数据交互方式来提高应用程序的开发效率。

### 要点
- 关系型数据库二十多年来一直很成功，它能够持久保存数据，控制并发访问，同时也提供一套集成机制。
- 由于关系模型与内存中的数据结构不匹配，所以应用程序开发人员一直为这种阻抗失谐问题所困扰。
- 数据库领域的迁移趋势是：原来，各个应用程序都把同一份数据库当成共用的集成点，而现在，各个应用程序都会封装自己的数据库，并通过服务彼此集成。
- 促使数据存储方式发生变化的重要原因是：需要在集群上运行大量数据，而关系型数据库不能在集群中高效运行。
- NoSQL是偶然出现的新名词。它没有规范的定义，我们只能描述此类数据库所共有的特征。
- 各种NoSQL数据库的共同特征是：
  - 不使用关系模型
  - 在集群中运行良好
  - 开源
  - 适用于21世纪的互联网公司
  - 无模式
- NoSQL崛起所产生的重要影响就是混合持久化。